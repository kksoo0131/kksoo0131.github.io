---
title: 게임 수학의 소개
author: kksoo0131
date: 2023-07-26 17:50:00 +0900
categories: [gameMathmatics]
tags: [gameMathmatics]
render_with_liquid: false
---
# 게임 수학의 분류
1. `공간`에 대한 수학
2. `물체`에 대한 수학
3. `회전`에 대한 수학


## `공간에 대한 수학`

게임세계는 현실세계를 모방한 가상세계이다.

하지만 현실세계는 불확실하지만 컴퓨터로 만든 가상세계는 `수로 만들어진 명확한 시스템`이고 이를 표현하는 일반적인 방법은 `벡터 공간`으로 표현하는것 이다.

> 벡터 공간 : 수의 체계를 기반으로 해서 쌓아올린 다차원의 데이터


### 벡터와 스칼라

벡터 공간은 벡터와 스칼라로 구성된다.

- 벡터 : 크기와 방향을 가진 물리량, 벡터 공간의 원소

- 스칼라 : 크기만 가진 물리량, 체 집합의 원소

### 체의 개념
`체 집합`: 어떤 특정한 규칙을 따르는 집합 이다. 기본적으로 세가지 성질을 만족 해야한다. 

 1. 닫힘 : 체 집합에 속하는 임의의 두 원소를 더하거나 곱하면 그 결과 또한 체 집합에 속하는 원소이다
 2. 결합 법칙
 3. 항등원
> 여기서 덧셈과 곱셈은 `일반적인 수학적 덧셈과 곰셈과는 다른 형태`일수 있다.
> 
> 체 집합의 에시 : 실수 체 , 유리수 체, 정수 체 , 유한 체 등
> 
### 체 집합의 예시 2

`체`의 예시 :
 
 1. 자동차의 방향을 나타내는 변수가 있다고 가정,
 
 2. 이 변수는 N,E,S,W와 같은 네 가지 상태를 가질 수 있고, 이때 집합 {N,E,S,W}가 유한체가 된다.
 
 3. `덧셈과 곱셈 모두 해당 방향으로 방향을 변경한다는 규칙을 가진다.`
 
 4. 덧셈 연산 -> 현재 방향이 N이고 N을 더하면 방향이 그대로 유지되어 N이다
 
 5. 곱셈 연산 -> 현재 방향이 N이고 S를 곱하면 방향이 S로 바뀐다

 6. 항등원 -> 현재 방향과 같은 값을 더하거나 곱하면 현재방향이 나온다.

 7. 결합법칙 -> N * (S *E) = (N * S) * E = E

 이렇게 자동차의 방향을 나타내는 유한 체 집합이 정의하였고 집합 {N,E,S,W}는 체집합이 되었다.

 ### 선형 변환과 행렬

1초에 많은 프레임을 찍어내기 위해서는 공간의 변환이 빠르고 단순 명료하게 이루어져야 한다.

그렇게 때문에 공간의 변환은 `선형 변환`을 통해서 이루어진다.

이를 컴퓨터가 수행하도록 하는 도구가 `행렬`이고 이를 통해 가상 공간이 빠르게 변화할 수 있다.


### 평면의 방정식

평면의 방정식을 사용해 여러개의 평면으로 이루어진` 공간안의 영역을 구축해서 활용`할 수 있다.

ex ) 카메라가 보는 영역을 절두체(Frustum)으로 구축하고 카메라에 보이는 물체만 렌더링하는 매커니즘


## `물체에 대한 수학`
벡터 공간 : 어떤 대상의 성질을 표현하는데 사용되는 데이터

우리는 벡터 공간으로 현실 세계와 유사한 공간을 만들어 내야한다.

그러기 위해서 `우리는 표현하기 위한 차원에서 한차원을 더 사용하게 된다`

예를 들어 2차원 물체를 표현하기 위해서는 일단 2차원의 공간이 필요하다

그리고 이 물체가 `이동` 하는 것을 표현하기 위해서는 1차원의 공간이 더 필요해 총 3차원의 공간을 활용하게 된다.

3차원 물체의 이동을 표현한다면 마찬가지로 4차원의 공간을 활용하게된다.

`게임에서는 이 벡터 공간을 목적에 따라 분리해서 관리한다.`
1. n차원 물체의 형태를 저장하는 n차원 공간
2. `벡터 공간`

> 또, 벡터 공간은 두가지로 구분된다.
> 
> 벡터 공간은 물체의 현재 위치를 저장하는 `아핀공간` 과
> 다음 프레임에서의 물체의 이동변화량을 저장하는 `이동벡터`


### 게임공간에 물체를 배치할때 일어나는 일 - 월드 공간과 로컬 공간

앞서 말했듯 게임에서 보이는 n차원 공간은 실제로는 n+1차원 공간이다.

하지만 모든 게임의 요소를 담을 게임 공간 즉, 게임의 중심이 되는 `월드 공간` 자체는 움직일 일이 없이 고정되있기 때문에

 n차원으로 공간을 표현하고, 벡터 공간은 `기본값`으로 유지된다.

그리고 배치하는 물체의 공간을 `로컬 공간`이라고 하고, 이 공간의 n차원 공간에 물체의 형태가 표현된다
. 벡터 공간에는 물체의 위치와 이동변화량이 저장된다.

물체를 게임의 월드 공간에 배치한다면 월드 공간에 물체를 직접 배치하는게 아니라

물체의 정보가 저장된 `로컬 공간을 월드 공간에 배치`하는 것이다.

그리고 이 로컬 공간의 벡터공간을 조절해서 월드 공간에서 물체가 이동하게된다.


### `점`에 대한 수학

`벡터 공간`은 항상 마지막 차원이다.

마지막 차원의 `값이 1인 공간`을 점 즉, `아핀 공간`, `점` 이라고 하고, 물체의 `현재 위치가 저장`된다.

마지막 차원의 `값이 0인 공간`을 `(이동)벡터`라고 하고, 다음 프레임에 `이동할 변화량`이 저장된다.

(이동)벡터는 크기와 방향을 가지게 되고, 점을 벡터를 사용하여 프레임마다 이동시키게 된다.

P를 점, v를 이동벡터라고 할 떄,

- P1 + v = P2 점 P1에서 v만큼 이동하면 점 P2가된다.
- P2 - P1 = v 점 P1과 P2 사이의 거리는 v이다.

이동벡터의 마지막 차원 값이 0이기 때문에, 

점을 이동벡터 만큼 밀어서 이동시키더라도 그전 위치와` 항상 평행`하다.

> 즉, 물체의 형태를 변형시키지 않고 위치만을 이동하게 된다.
> 

이 게산을 마지막 차원의 값만을 생각한다면 아래와 같이 생각할 수 있다.
- 점 + 벡터 = 점 (1+0 = 1)
- 점 - 점 = 벡터 (1-1 = 0)
- 벡터 + 벡터 = 벡터 (0 + 0 = 0)

그렇다면 마지막 차원 값이 1인 점과 점을 더한다면 어떻게 될까??

 - 점 + 점 = ???? (1 + 1 = 2)

마지막 차원 값이 2가 되버리기 때문에 아핀 공간의 영역을 벗어나게 되고,  `이런 방식으로는 점과 점을 더할 수 없다.`


### `아핀조합`과 `선`
이때 점에 계수를 붙혀주어서 다음과 같은 계산을 할 수 있다.

    aP1 + bP2
    = a(x1,y1,1) + b(x2,y2,1)
    = (ax1,ay1,a) + (bx2,by2,b)
    = (ax1 + bx2, ay1 + by2, a+b)
    이때 a + b 가 1이라면?
    P = aP1 + bP2 = aP1 + (a-1)P2 = (ax1 + bx2, ay1 + by2, 1)
    마지막 차원의 값이 1로 떨어지게 된다.

이러한 공식을 `아핀조합`이라고 한다.

이 아핀 조합은 물체를 구성하는데 기본이 되고 중요한 역할을 하게된다.

     aP1 + (a-1)P2

     이 공식을 만족하는 점은 a의 범위에 따라서 무한히 확장 할 수있고 이것을 `직선`이라고 한다.

     이때 계수 a의 값이 0이라면 P2에 위치한 점, 1이라면 P1에 위치한 점을 시작점으로

     반대의 점 방향으로 무한히 확장 할 수 있고 이것을 `반직선`이라고 한다.

    이때 반직선 (Ray)는 레이캐스팅, 레이트레이싱 등 에서 사용된다.

    그리고 a의 값이 0에서 1사이의 값의 범위라면 범위가 정해진 `선분`이 만들어진다.

### `면`

면을 만들때는 3개의 점을 사용하게 된다.

    P = aP1 + bP2 + (1-a-b)P3

    이때 a와 b의 값이 0~1사이의 값이라면 세 점 내부에 위치한 점을 생성하게 된다.

    이 영역을 `삼각형`의 영역이라고 한다. 

    이 영역을 모두 채워서 삼각형을 만들 수 있다.


그리고 결국 이 삼각형이 모여서 물체를 생성하게 되고 이것이 `게임 그래픽의 기본 원리` 이다.

이 삼각형의 정보를 모아둔 데이터를 `메쉬`라고 한다.


### (이동)벡터를 다루는 수학

## `회전에 대한 수학`

## Reference
[게임 수학의 이해 - 이득우](https://www.inflearn.com/course/%EA%B2%8C%EC%9E%84-%EC%88%98%ED%95%99-%EC%9D%B4%ED%95%B4/dashboard)