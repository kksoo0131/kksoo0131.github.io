---
layout: post
title:  "가비지 컬렉터?"
date:   2023-10-27
excerpt: "내일배움캠프 61일차 TIL "
tag:
- TIL
- 내일배움캠프
- 스파르타
- 기술면접
comments: true
---

![nbcbanner](/assets/img/TILbanner.png)

1. 가비지 컬렉터?

2. struct와 class를 비교하여 설명해 주세요.

<br/>
<br/>


## 기술 면접 예상 질문 - 가비지 컬렉터에 대해 설명해주세요


### 가비지 컬렉터란?

가비지 컬렉터란 C#이나 자바에서 메모리 관리를 자동화하여 개발자가 별도로 신경 쓰지 않아도 되게 해주는 시스템입니다.

<br/>

만약 C,C++ 같이 가비지 컬렉터가 없는 언어에서는 어떤 인스턴스를 힙 영역에 할당하고 포인터 변수로 가르킬 때

이 포인터 변수가 다른 인스턴스를 가르키게 된다면 먼저 가르키고 있던 인스턴스에는 접근할 방법이 없어져 제거할수도 사용할수도 없는 메모리 누수가 발생합니다.

메모리 누수를 방지하기 위해 명시적으로 메모리를 해제해주어야 합니다.

<br/>


하지만 C#이나 자바에서는 다릅니다. 

가비지 컬렉터가 힙 영역의 메모리를 주기적으로 검사하여 이런 메모리 누수를 자동으로 해제해줍니다.

그렇기 때문에 개발자는 메모리 관리에 대해서 덜 신경쓰면서 작업을 진행할 수 있게 됩니다.


### 가비지 컬렉터의 동작 원리

기본적으로는 mark and sweep, 힙에 존재하는 객체 중 아직 참조되고 있는 객체를 mark하고, 아닌 객체를 sweep하는 방식


### 가비지 컬렉터의 비용

- 실행 시간의 오버헤드 : 가비지 컬렉터는 런타임 중에 메모리를 검사하고, 사용하지 않는 메모리를 해제하는 작업을 수행하기 떄문에 성능에 영향을 미칠 수 있습니다.

- 메모리 오버헤드 : 가비지 컬렉터가 메모리를 효율적으로 관리하기 위해서는 추가적인 메모리가 필요해 메모리 사용량이 증가할 수 있습니다.


### 가비지 컬렉터의 단점

- 예측 불가능한 정지 시간 : 대규모의 힙 메모리를 사용하는 경우 가비지 컬렉터의 실행동안 다른 부분이 일시 중지될 수 있습니다.

- 자원의 해제 시점 : 메모리가 언제 해제될지 항상 예측할 수 없기 때문에, 즉시 해제해야 하는 경우 문제가 생길 수 있습니다.

- 리소스 관리 : 가비지 컬렉터는 힙에 할당된 인스턴스의 메모리는 해제하지만 해당 인스턴스가 가진 외부 리소스까지는 해제해 주지 않습니다. 

  그래서 리소스 관리가 필요한 경우에는 따로 Finalize나 IDisposable를 사용해서 리소스를 해제 해주어야 됩니다.


### Summary

가비지 컬렉터란 메모리 관리를 자동화하여 메모리 누수를 방지해 개발자가 별도로 신경쓰지 않게해주는 시스템입니다.

기본적으로 mark and sweep 방식을 사용해 아직 참조되는 객체를 mark하고 아닌 객체를 sweep해서 해제 해줍니다.

하지만 성능에 영향을 미칠 가능성이 있기 때문에 가비지 컬렉터의 사용을 최적화 하기 위한 전략들이 필요합니다.

<br/>
<br/>


## 기술 면접 예상 질문 - 가비지 컬렉터를 회피하기 위한 전략은 무엇이 있나요?

### struct

- struct는 값 타입으로 메모리의 스택 영역에 저장된다.
- 상속을 사용할 수 없고 인터페이스는 구현 가능하다.
- 값 타입 이기 때문에 null값을 가질 수 없다. (컴파일 에러 발생, 하지만 nullable struct는 가능)
- 빠른 접근 시간(스택영역), 데이터의 크기가 작을 때 사용 된다 (값 복사가 일어나기 떄문에 크기가 크면 불리하다)


### class

- class는 참조 타입으로 메모리의 힙 영역에 저장된다.
- 상속이 가능하며, 추상클래스, 인터페이스 구현이 가능하다.
- 참조 타입 이기 떄문에 null이 할당될 수 있다.
- 더 복잡한 동작을 요구할 때 사용된다.


### Summary

struct와 class의 가장 큰 차이는 struct는 값 타입 이므로 메모리의 스택영역에 저장되고

class는 참조 타입이므로 메모리의 힙 영역에 저장된다는 점 입니다.

struct는 스택 영역에서 데이터를 관리하기 떄문에 빠른 접근 시간을 요구하거나 데이터의 크기가 작을 때 유리하고 class는 더 복잡한 작업에서 유리합니다.

<br/>
<br/>

![nbcthumbnail](/assets/img/thumbnail-image.png)